# ランキングシステム操作マニュアル

## はじめに

このマニュアルは、文化祭企画「坂井の人事」でランキングシステムを操作するスタッフ向けです。
システムの基本的な使い方から、トラブル時の対応まで説明しています。

## 目次

1. [システム概要](#システム概要)
2. [基本操作（ルームスタッフ用）](#基本操作ルームスタッフ用)
3. [ランキング表示操作](#ランキング表示操作)
4. [プレイヤー管理](#プレイヤー管理)
5. [トラブル対応](#トラブル対応)
6. [よくある質問](#よくある質問)

## システム概要

### 企画の流れ

1. プレイヤーが3つのルームのいずれかでクイズに挑戦
2. スタッフが問題を出題し、プレイヤーが回答
3. スタッフが「正解」「不正解」「パス」を入力
4. リアルタイムでランキングに反映
5. ラウンド終了後、統計情報を確認

### スコアの仕組み

- **正解**: +100点 × 連続正解数
- **不正解**: -500点 × 連続不正解数
- **パス**: 0点（連続がリセットされる）
- **スコア下限**: 0点（マイナスにはならない）

**例**: 正解→正解→不正解→パスの場合

- 1問目: +100点
- 2問目: +200点（連続2回目）
- 3問目: -500点 → 0点（下限適用）
- 4問目: 0点

### スタッフの役割分担

- **ルームスタッフ（3名）**: 各ルームで結果入力
- **表示スタッフ（1名）**: ランキング表示の操作

## 基本操作（ルームスタッフ用）

### 💡 事前準備

1. **スマートフォンでアクセス**
   - 配布されたURLにアクセス
   - ブックマーク登録推奨

2. **担当ルーム確認**
   - ルーム1（前方）、ルーム2（中央）、ルーム3（後方）
   - 自分の担当ルームを確認

### 🚀 プレイヤー受付・ラウンド開始

1. **「結果入力」をタップ**
   - メインページから「結果入力」を選択

2. **ルーム選択**
   - 自分の担当ルーム（1・2・3）を選択

3. **プレイヤー選択**
   - **新規プレイヤー**: 「新規プレイヤー作成」をタップ
     - 表示名を入力（例：「田中太郎」） ※任意
     - プレイヤーID（例：1-001）が自動発行される
   - **既存プレイヤー**: プレイヤーIDを入力（例：1001）

4. **ラウンド開始**
   - 「新しいラウンドを開始」をタップ
   - または「前回のラウンドを続行」を選択  
    ※新規ユーザ及び前回のラウンドが終了済みの場合は非表示

### ⚡ 問題出題・結果入力

1. **問題を出題**
   - プレイヤーに問題を出す

2. **結果を入力**
   - 「正解」「不正解」「パス」のいずれかをタップ

3. **スコア確認**
   - 画面上部に現在のスコアが表示される
   - 「現ラウンドスコア」「累計スコア」「最高ラウンドスコア」

4. **入力ミスの修正**
   - 下部の履歴から間違った回答をタップ
   - 正しい結果に変更可能

### 🏁 ラウンド終了

1. **「ラウンド終了」をタップ**
   - 全ての問題が終わったら終了ボタンを押す

2. **結果確認**
   - ラウンドスコア、順位、累計情報が表示される

3. **次の行動選択**
   - **ラウンド再開**: 現在のラウンドを続行(間違えて終了した場合)
   - **担当終了**: プレイヤー交代

## ランキング表示操作

### 🖥️ 教室内表示用（インタラクティブモード）

**使用場面**: 結果発表時

1. **「教室内掲示用」をクリック**
   - PCで操作

2. **表示切り替え**
   - **待機画面**: 初期状態
   - **Enterキー**: 最新ラウンドランキング表示
   - **もう一度Enterキー**: 全体ランキング表示
   - **5分間無操作**: 自動で待機画面に戻る

※"最新ラウンド"扱いになるのは終了から5分以内のラウンドのみ

### 📺 教室外表示用（ビューオンリーモード）

**使用場面**: 常時掲示

1. **「教室外掲示用」をクリック**
   - PCで操作

2. **自動更新**
   - 30秒ごとに自動でランキング更新
   - 操作不要で常に最新情報を表示

## プレイヤー管理

### 👥 プレイヤー情報確認・編集

1. **「プレイヤー管理」をタップ**
   - メインページから選択

2. **プレイヤー検索**
   - プレイヤーIDで検索
   - 一覧から選択

3. **編集可能項目**
   - **表示名変更**: 名前の修正
   - **過去の回答結果**: 間違って入力した結果の修正
   - **統計情報確認**: 累計スコア、順位などの確認

### 🔧 システム管理

**※問題が発生したのみ操作**

1. **「システム管理」をタップ**

2. **利用可能機能**
   - **キャッシュクリア**: ランキング表示のリフレッシュ
   - **ヘルスチェック**: システムのサーバ側ヘルスチェック

## トラブル対応

### ⚠️ 予測されるトラブルと対処法

#### 1. 画面が表示されない

**症状**: 白い画面、エラーメッセージ
**対処法**:

1. Wi-Fi接続を確認
2. ページを再読み込み（ブラウザの更新ボタン）
3. ブラウザを閉じて再度アクセス

#### 2. 入力したのにスコアが反映されない

**症状**: ボタンを押してもスコアが変わらない
**対処法**:
1. ネットワーク接続を確認
2. しばらく待ってからリロード(ラウンド終了時などに即座に反映されない場合があります)

#### 3. 間違った回答を入力した

**症状**: 違う結果になってしまった
**対処法**:

1. 「プレイヤー管理」から該当プレイヤーを検索
2. 間違った回答結果を編集

#### 4. ランキングが更新されない

**症状**: 新しい結果が反映されない
**対処法**:

1. 「システム管理」→「キャッシュクリア」を実行
2. ランキング画面を再読み込み
3. しばらく待ってから再確認

### 🆘 緊急時の対応

#### システム全体がダウンした場合

管理者に連絡を行ってください

#### ネットワーク障害の場合

1. **Wi-Fi切り替え**: 別のネットワークを試す
2. **モバイル回線**: スマホのテザリング利用

---

**納品日**: 2025年8月7日  
**開発者**: ast\<code@ast24.dev\>  
**プロジェクト**: sf25-cls-rank
