# フロントエンド設計書

## 概要

スタッフ入力用とランキング表示用で2つのWebUIを用意する

## 機能要件

### スタッフ入力用

スタッフが1問ごとに正解/不正解を入力し送信を行う  
履歴の編集なども必要  
できるだけリロードセーフにする(変数ではなくURLによる状態管理)  
詳細は[要件定義書](./req.md)を参照

### ランキング表示用

ランキングをブラウザで表示し、プロジェクターで投影する  
教室内用は手動更新、教室外用はポーリングで更新する
詳細は[要件定義書](./req.md)を参照

## 非機能要件

[対応デバイス]

- スタッフ入力用: スマートフォン/PC
- ランキング表示用: PC

## 仕様

表面上はパスを分けるが内部はSPAとする(`/staff/*`も`/ranking/*`もSPA)

### スタッフ入力用

URL: `/staff/*`

#### フロー

1. スタッフがブラウザで /staff にアクセス
2. シフト開始ボタンを押し、担当のルームを選択
3. ユーザ選択ボタンを押し、ユーザ識別子を入力or発行
4. ラウンド開始ボタンを押し、ラウンドを選択or作成
5. 正解/不正解を選択し送信
6. リアルタイムでスコアが計算/更新され、ランキングに反映
7. 5に戻る or 8に進む
8. ゲームが終了したら、ラウンド終了ボタンを押してラウンドを終了&結果(スコア/ランク)を表示
9. 3に戻る or 10に進む
10. シフト終了ボタンを押してシフトを終了

#### ページ

- `/staff`: スタッフ用のトップページ `./enter`と`./results`へのリンクを表示
- `/staff/enter`: スタッフの結果入力用ページトップ 担当ルーム選択でシフト開始
- `/staff/enter?room=:room_id`: 担当ルーム選択後 ユーザ識別子入力でユーザページへ
- `/staff/enter/:user_id?room=:room_id`: ユーザページトップ ラウンド選択でラウンド開始
- `/staff/enter/:user_id/round?room=:room_id`: ユーザごとの結果入力ページ(ラウンド)
- `/staff/results`: 結果リストページ
- `/staff/results/:user_id`: ユーザごとの結果表示/編集ページ

### ランキング表示用

URL: `/ranking/*`

#### ページ

- `/ranking/interactive`: スタッフが画面遷移 教室内用
- `/ranking/viewonly`: 自動更新 教室外用
