# 要件定義書

## 機能要件

ユーザ及び各ユーザのスコアを管理する

### 入力

スタッフが1問ごとに正解/不正解を入力し送信を行う  
ユーザ識別子:セッション番号:問題番号:正解/不正解の形式

[スコア計算方式]  
`スコア = 前回の結果 + ( 正解 ? +100 : -500 ) * 連続[正解/不正解]数`

[ユーザ識別子]  
`ユーザID = ルームID(1~3)-通し番号(xxxx)`  
TODO: ランキング用の表示名をカスタムで用意するか検討

TODO: 1ルームに1ユーザ想定でいいのか決定

#### セッション

ユーザの1回の来訪を1セッションとし、1セッションに対して複数の問題を解くことができる

過去のセッションを含めた履歴の編集(insert/update/delete)も一応実装が必要  
セッションは最後の結果から一定時間経過していれば閉じられないまま終了したとみなす

### 表示(ランキング)

- 今日の累積スコア
- 1周当たりのスコア

ランキングは1日ごとにリセットする

## 非機能要件

### スケーラビリティ

スタッフ x 3人 + ランキング表示端末 x 1台 が捌ければ充分

### 可用性/保守性

文化祭中だけ動けばよい

### セキュリティ

URL自体が露出しないうえ、想定される攻撃目的がチートのみであるため最低限

- 入力APIに固定のAPIキーをクエリパラメータで渡す
- ユーザ識別子被せ(ランキング表で公開してるため)の対策  
  これこそ表示名と識別子を分離することで対策可能なのではないか

### コスト

基本的に無料枠を利用する  
安価であれば申請次第で多少はコストをかけてもよい可能性がある
